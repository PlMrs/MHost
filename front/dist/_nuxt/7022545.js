(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{334:function(e,t,r){e.exports=r.p+"img/edit.2c345f6.svg"},362:function(e,t,r){var content=r(412);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(96).default)("96e521f8",content,!0,{sourceMap:!1})},411:function(e,t,r){"use strict";r(362)},412:function(e,t,r){var n=r(95)((function(i){return i[1]}));n.push([e.i,".show[data-v-6771d835]{display:block!important}",""]),n.locals={},e.exports=n},424:function(e,t){},425:function(e,t){},434:function(e,t){},435:function(e,t){},455:function(e,t){},457:function(e,t){},458:function(e,t){},461:function(e,t){},462:function(e,t){},467:function(e,t){},468:function(e,t){},476:function(e,t){},482:function(e,t){},485:function(e,t){},493:function(e,t,r){"use strict";r.r(t);var n=r(20),o=r(3),c=(r(45),r(24),r(32),r(54),r(354),r(53),r(41),r(33),r(11),r(65),r(39),r(66),r(420));function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={data:function(){return{isNSOpen:!1,isMailOpen:!1,isPasswordOpen:!1,isNeedsOpen:!1,isPictureOpen:!1,isVerifiedFormOpen:!1,isDescOpen:!1,userNeeds:null,options:[{text:"Je veux héberger",value:"H"},{text:"Je veux voyager",value:"T"},{text:"Je veux juste discuter",value:"D"}],name:null,surname:null,email:null,password:null,confPassword:null,file:"",certificatScolaire:"",carte_id:"",description:""}},mounted:function(){this.name=this.$auth.$state.user.name,this.surname=this.$auth.$state.user.surname,this.email=this.$auth.$state.user.email,this.userNeeds=this.$auth.$state.user.needs,this.description=this.$auth.$state.user.description},computed:{needs:function(){return"T"===this.userNeeds?"voyager":"H"===this.userNeeds?"héberger":"discuter"}},methods:{update:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!e.password){r.next=6;break}if(e.password==t.confPassword){r.next=3;break}return r.abrupt("return");case 3:n=c.genSaltSync(Number("10")),o=c.hashSync(e.password,n),e.password=o;case 6:return r.next=8,t.$axios.$patch("".concat("http://localhost:3000","/users/").concat(t.$auth.$state.user.id),e,{headers:{Authorization:t.$auth.$storage._state["_token.local"]}});case 8:1===r.sent.affected&&(e.name&&(t.name=e.name,t.$auth.setUser(d(d({},t.$auth.user),{},{name:e.name}))),e.surname&&(t.surname=e.surname,t.$auth.setUser(d(d({},t.$auth.user),{},{surname:e.surname}))),e.email&&(t.email=e.email,t.$auth.setUser(d(d({},t.$auth.user),{},{email:e.email}))),e.needs&&(t.userNeeds=e.needs,t.$auth.setUser(d(d({},t.$auth.user),{},{needs:e.needs}))),t.show("all"));case 10:case"end":return r.stop()}}),r)})))()},updatePicture:function(){var e=new FormData;e.append("file",this.file),this.$axios.$post("/users/upload",e,{headers:{Authorization:this.$auth.$storage._state["_token.local"],"Content-Type":"multipart/form-data"}}),this.$router.go()},handleFileUpload:function(){this.file=this.$refs.file.files[0]},show:function(e){"NS"===e&&(this.isNSOpen=!this.isNSOpen),"email"===e&&(this.isMailOpen=!this.isMailOpen),"password"===e&&(this.isPasswordOpen=!this.isPasswordOpen),"needs"===e&&(this.isNeedsOpen=!this.isNeedsOpen),"picture"===e&&(this.isPictureOpen=!this.isPictureOpen),"description"===e&&(this.isDescOpen=!this.isDescOpen),"all"===e&&(this.isNSOpen=!1,this.isMailOpen=!1,this.isPasswordOpen=!1,this.isNeedsOpen=!1)},postVerifications:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=new FormData,console.log(e.$refs.carte_id.files[0]),r.append("carte_id",e.$refs.carte_id.files[0]),r.append("certificatScolaire",e.$refs.certificatScolaire.files[0]),console.log(r.has("carte_id")&&r.has("certificatScolaire")),t.next=7,e.$axios.$post("/users/uploadVerifications",r,{headers:{Authorization:e.$auth.$storage._state["_token.local"],"Content-Type":"multipart/form-data"}});case 7:t.sent.affected;case 9:case"end":return t.stop()}}),t)})))()}}},m=(r(411),r(44)),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-[80%] flex items-center flex-col"},[n("h1",[e._v("Paramètres")]),e._v(" "),n("div",{staticClass:"flex items-center justify-center flex-col"},[n("div",{staticClass:" cursor-pointer w-[200px] h-[200px] rounded-[100%] flex justify-center items-center border border-[#213B83]",on:{click:function(t){return e.show("picture")}}},[n("div",{staticClass:"w-[180px] h-[180px] rounded-[100%] overflow-hidden"},[n("img",{staticClass:"w-full h-full object-cover",attrs:{src:r(221)("./"+this.$auth.$state.user.picture)}})])]),e._v(" "),this.$auth.user.verified?n("p",[e._v("Vérifié ✔️")]):e._e(),e._v(" "),this.$auth.user.verified||null==this.$auth.user.carte_id?e._e():n("p",[e._v("En attente de vérification")]),e._v(" "),this.$auth.user.verified||null!==this.$auth.user.carte_id?e._e():n("p",{staticClass:"cursor-pointer",on:{click:function(t){e.isVerifiedFormOpen=!e.isVerifiedFormOpen}}},[e._v("Non-Vérifié, cliquer pour faire la demande")]),e._v(" "),this.$auth.user.verified||null!==this.$auth.user.carte_id?e._e():n("div",{directives:[{name:"show",rawName:"v-show",value:e.isVerifiedFormOpen,expression:"isVerifiedFormOpen"}]},[n("form",{staticClass:"flex flex-col",on:{submit:function(t){return t.preventDefault(),e.postVerifications()}}},[n("label",{attrs:{for:"carte_id"}},[e._v("Carte d'identité")]),e._v(" "),n("input",{ref:"carte_id",attrs:{name:"carte_id",type:"file",accept:".jpg, .png, .jpeg, .pdf",title:"carte d'identité",placeholder:"carte d'identité",required:""}}),e._v(" "),n("label",{attrs:{for:""}},[e._v("Certificat scolaire")]),e._v(" "),n("input",{ref:"certificatScolaire",attrs:{name:"certificat_scolaire",type:"file",accept:".jpg, .png, .jpeg, .pdf",title:"certificat scolaire",placeholder:"certificat scolaire",required:""}}),e._v(" "),n("button",{attrs:{type:"submit"}},[e._v("Envoyer")])])]),e._v(" "),n("div",{ref:"name_surname",staticClass:"bg-white w-fit absolute z-10 p-2.5 rounded-[5px] hidden",class:{show:e.isPictureOpen}},[n("form",{staticClass:"flex flex-col items-center w-fit",on:{submit:function(t){return t.preventDefault(),e.updatePicture()}}},[n("input",{ref:"file",staticClass:"my-3.5",attrs:{type:"file",placeholder:"Télécharger une image"},on:{change:function(t){return e.handleFileUpload()}}}),e._v(" "),n("button",[e._v("Modifier")])])]),e._v(" "),n("div",{staticClass:"flex items-center relative justify-center my-3.5"},[n("p",{staticClass:"text-3xl font-bold"},[e._v(e._s(this.name)+" "+e._s(this.surname))]),e._v(" "),n("button",{staticClass:"absolute right-[-33px]",on:{click:function(t){return e.show("NS")}}},[n("img",{staticClass:"w-[20px]",attrs:{src:r(334),alt:""}})]),e._v(" "),n("div",{ref:"name_surname",staticClass:"bg-white w-fit absolute z-10 p-2.5 rounded-[5px] hidden",class:{show:e.isNSOpen}},[n("form",{staticClass:"flex flex-col items-center w-fit",on:{submit:function(t){return t.preventDefault(),e.update({name:e.name,surname:e.surname})}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"my-3.5",attrs:{type:"text",placeholder:"Nom"},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.surname,expression:"surname"}],staticClass:"my-3.5",attrs:{type:"text",placeholder:"Prénom"},domProps:{value:e.surname},on:{input:function(t){t.target.composing||(e.surname=t.target.value)}}}),e._v(" "),n("button",[e._v("Modifier")])])])]),e._v(" "),n("div",{staticClass:"flex items-center relative justify-center my-3.5"},[n("p",[e._v(e._s(this.email))]),e._v(" "),n("button",{staticClass:"absolute right-[-33px]",on:{click:function(t){return e.show("email")}}},[n("img",{staticClass:"w-[20px]",attrs:{src:r(334),alt:""}})]),e._v(" "),n("div",{ref:"name_surname",staticClass:"bg-white w-fit absolute z-10 p-2.5 rounded-[5px] hidden",class:{show:e.isMailOpen}},[n("form",{staticClass:"flex flex-col items-center w-fit",on:{submit:function(t){return t.preventDefault(),e.update({email:e.email})}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"my-3.5",attrs:{type:"email",placeholder:"E-mail"},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),e._v(" "),n("button",[e._v("Modifier")])])])]),e._v(" "),n("div",{staticClass:"flex items-center relative justify-center my-3.5"},[n("p",[e._v(e._s(this.description))]),e._v(" "),n("button",{staticClass:"absolute right-[-33px]",on:{click:function(t){return e.show("description")}}},[n("img",{staticClass:"w-[20px]",attrs:{src:r(334),alt:""}})]),e._v(" "),n("div",{ref:"desc",staticClass:"bg-white w-fit absolute z-10 p-2.5 rounded-[5px] hidden",class:{show:e.isDescOpen}},[n("form",{staticClass:"flex flex-col items-center w-fit",on:{submit:function(t){return t.preventDefault(),e.update({description:e.description})}}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],attrs:{name:"desc",placeholder:"description"},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),e._v(" "),n("button",[e._v("Modifier")])])])]),e._v(" "),n("div",{staticClass:"flex items-center relative justify-center my-3.5"},[n("p",[e._v("Changer mon mot de passe")]),e._v(" "),n("button",{staticClass:"absolute right-[-33px]",on:{click:function(t){return e.show("password")}}},[n("img",{staticClass:"w-[20px]",attrs:{src:r(334),alt:""}})]),e._v(" "),n("div",{ref:"name_surname",staticClass:"bg-white w-fit absolute z-10 p-2.5 rounded-[5px] hidden",class:{show:e.isPasswordOpen}},[n("form",{staticClass:"flex flex-col items-center w-fit",on:{submit:function(t){return t.preventDefault(),e.update({password:e.password})}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.password,expression:"password"}],staticClass:"my-3.5",attrs:{type:"password",placeholder:"Mot de passe"},domProps:{value:e.password},on:{input:function(t){t.target.composing||(e.password=t.target.value)}}}),e._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.confPassword,expression:"confPassword"}],staticClass:"my-3.5",attrs:{type:"password",placeholder:"Confirmation du mot de passe"},domProps:{value:e.confPassword},on:{input:function(t){t.target.composing||(e.confPassword=t.target.value)}}}),e._v(" "),n("button",[e._v("Modifier")])])])]),e._v(" "),n("div",{staticClass:"flex items-center relative justify-center my-3.5"},[n("p",[e._v("Je veux "+e._s(e.needs))]),e._v(" "),n("button",{staticClass:"absolute right-[-33px]",on:{click:function(t){return e.show("needs")}}},[n("img",{staticClass:"w-[20px]",attrs:{src:r(334),alt:""}})]),e._v(" "),n("div",{ref:"name_surname",staticClass:"bg-white w-fit absolute z-10 p-2.5 rounded-[5px] hidden",class:{show:e.isNeedsOpen}},[n("form",{staticClass:"flex flex-col items-center w-fit",on:{submit:function(t){return t.preventDefault(),e.update({needs:e.userNeeds})}}},[n("select",{directives:[{name:"model",rawName:"v-model",value:e.userNeeds,expression:"userNeeds"}],on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.userNeeds=t.target.multiple?r:r[0]}}},[n("option",{attrs:{disabled:"",value:""}},[e._v("Choisissez")]),e._v(" "),e._l(e.options,(function(option){return n("option",{domProps:{value:option.value}},[e._v("\n                                "+e._s(option.text)+"\n                          ")])}))],2),e._v(" "),n("button",[e._v("Modifier")])])])])])])}),[],!1,null,"6771d835",null);t.default=component.exports}}]);