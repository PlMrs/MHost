(window.webpackJsonp=window.webpackJsonp||[]).push([[14,9],{354:function(e,t,r){"use strict";var n=r(13),o=r(1),c=r(5),d=r(126),l=r(18),v=r(14),h=r(223),m=r(57),f=r(98),w=r(222),M=r(6),x=r(99).f,I=r(46).f,y=r(21).f,C=r(385),A=r(224).trim,_="Number",N=o.Number,T=N.prototype,D=o.TypeError,j=c("".slice),E=c("".charCodeAt),k=function(e){var t=w(e,"number");return"bigint"==typeof t?t:L(t)},L=function(e){var t,r,n,o,c,d,l,code,v=w(e,"number");if(f(v))throw D("Cannot convert a Symbol value to a number");if("string"==typeof v&&v.length>2)if(v=A(v),43===(t=E(v,0))||45===t){if(88===(r=E(v,2))||120===r)return NaN}else if(48===t){switch(E(v,1)){case 66:case 98:n=2,o=49;break;case 79:case 111:n=8,o=55;break;default:return+v}for(d=(c=j(v,2)).length,l=0;l<d;l++)if((code=E(c,l))<48||code>o)return NaN;return parseInt(c,n)}return+v};if(d(_,!N(" 0o1")||!N("0b1")||N("+0x1"))){for(var $,U=function(e){var t=arguments.length<1?0:N(k(e)),r=this;return m(T,r)&&M((function(){C(r)}))?h(Object(t),r,U):t},O=n?x(N):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),z=0;O.length>z;z++)v(N,$=O[z])&&!v(U,$)&&y(U,$,I(N,$));U.prototype=T,T.constructor=U,l(o,_,U,{constructor:!0})}},355:function(e,t,r){e.exports=r.p+"img/close.361ad9a.png"},356:function(e,t,r){var content=r(387);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(96).default)("98b6a2d2",content,!0,{sourceMap:!1})},373:function(e,t,r){"use strict";r.r(t);var n=r(3),o=(r(45),r(11),r(39),{data:function(){return{dates:{start:"",end:""},alreadyDates:[],disabledDates:[],isPosted:!1}},props:{targetedUser:{}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("/planning",{headers:{user_1:e.$auth.user.id,user_2:e.targetedUser.id}});case 2:(r=t.sent)&&r.forEach((function(t){e.alreadyDates.push({highlight:{start:{color:"red",fillMode:"solid"},base:{color:"red",fillMode:"light"},end:{color:"red",fillMode:"solid"}},dates:{start:new Date(t.start),end:new Date(t.end)}}),e.disabledDates.push({start:t.start,end:t.end})}));case 4:case"end":return t.stop()}}),t)})))()},methods:{closeHost:function(){this.$emit("close-host")},showDate:function(){console.log(this.dates)},postDemand:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var body;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return body={by:e.$auth.user.id,with:e.targetedUser.id,start:e.dates.start,end:e.dates.end},t.next=3,e.$axios.$post("/planning",body,{headers:{Authorization:e.$auth.$storage._state["_token.local"]}});case 3:201===t.sent&&(e.isPosted=!e.isPosted);case 5:case"end":return t.stop()}}),t)})))()},moveToSettings:function(){this.$store.commit("change","settings")}}}),c=r(44),component=Object(c.a)(o,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"bg-white p-[30px] shadow shadow-gray-800 rounded-[10px] max-w-md"},[n("img",{staticClass:"absolute top-2 right-2 w-5 cursor-pointer",attrs:{src:r(355)},on:{click:e.closeHost}}),e._v(" "),!0===e.targetedUser.verified&&!0===this.$auth.user.verified?n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isPosted,expression:"!isPosted"}]},[n("p",{staticClass:"font-bold text-center text-lg"},[e._v("Faire une demande d'hôte")]),e._v(" "),n("form",{staticClass:"flex flex-col",on:{submit:function(t){return t.preventDefault(),e.postDemand.apply(null,arguments)}}},[n("label",{staticClass:"my-2 font-medium",attrs:{for:"planning"}},[e._v("De quand à quand?")]),e._v(" "),n("v-date-picker",{attrs:{attributes:e.alreadyDates,"min-date":new Date,"disabled-dates":e.disabledDates,"is-range":""},on:{dayclick:e.showDate},model:{value:e.dates,callback:function(t){e.dates=t},expression:"dates"}}),e._v(" "),n("button",[e._v("Envoyer")])],1)]),e._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:e.isPosted,expression:"isPosted"}]},[n("p",[e._v("Votre demande à bien été prise en compte")])])]):e._e(),e._v(" "),!1===this.$auth.user.verified?n("div",[n("p",[e._v("Vous n'avez pas le statut vérifié. Pour obtenir ce statut, merci de transmettre les documents demandé.")]),e._v(" "),n("button",{on:{click:e.moveToSettings}},[e._v("Demander à être vérifié")])]):e._e(),e._v(" "),!1===e.targetedUser.verified&&!0===this.$auth.user.verified?n("div",[n("p",[e._v("Le correspondant ne possède pas le statut vérifié, vous ne pouvez pas encore effectuer de demandes d'hôte avec lui.")])]):e._e()])}),[],!1,null,null,null);t.default=component.exports},384:function(e,t){e.exports="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBzdGFuZGFsb25lPSJubyI/Pgo8IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDIwMDEwOTA0Ly9FTiIKICJodHRwOi8vd3d3LnczLm9yZy9UUi8yMDAxL1JFQy1TVkctMjAwMTA5MDQvRFREL3N2ZzEwLmR0ZCI+CjxzdmcgdmVyc2lvbj0iMS4wIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciCiB3aWR0aD0iNTEyLjAwMDAwMHB0IiBoZWlnaHQ9IjUxMi4wMDAwMDBwdCIgdmlld0JveD0iMCAwIDUxMi4wMDAwMDAgNTEyLjAwMDAwMCIKIHByZXNlcnZlQXNwZWN0UmF0aW89InhNaWRZTWlkIG1lZXQiPgoKPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMC4wMDAwMDAsNTEyLjAwMDAwMCkgc2NhbGUoMC4xMDAwMDAsLTAuMTAwMDAwKSIKZmlsbD0iI0Y2QzcyQiIgc3Ryb2tlPSJub25lIj4KPHBhdGggZD0iTTE2NyA1MTA2IGMtMjAgLTggLTQzIC0xOSAtNTEgLTI1IC0yNiAtMjIgLTQ2IC03OSAtNDYgLTEzMCAwIC00Mgo0MjEgLTE5NTYgNDMyIC0xOTY2IDMgLTMgMjA0MyAtMzU3IDIyOTEgLTM5OCA3MCAtMTIgMTI3IC0yNCAxMjcgLTI3IDAgLTMKLTU3IC0xNSAtMTI3IC0yNyAtMjQ5IC00MSAtMjI4OCAtMzk1IC0yMjkxIC0zOTggLTExIC0xMCAtNDMyIC0xOTI0IC00MzIKLTE5NjYgMCAtMTE4IDg4IC0xODkgMTk5IC0xNTkgNTEgMTQgNDY5OCAyMzk1IDQ3MjkgMjQyNCAzNyAzMyA1MiA3MCA1MiAxMjYKMCA1NiAtMTUgOTMgLTUyIDEyNiAtMjkgMjcgLTQ2NzUgMjQxMCAtNDcyNiAyNDI0IC00NyAxMyAtNTggMTIgLTEwNSAtNHoiLz4KPC9nPgo8L3N2Zz4K"},385:function(e,t,r){var n=r(5);e.exports=n(1..valueOf)},386:function(e,t,r){"use strict";r(356)},387:function(e,t,r){var n=r(95)((function(i){return i[1]}));n.push([e.i,".reverse[data-v-40c7d6bd]{display:flex;flex-direction:row-reverse}.hide-scrollbar[data-v-40c7d6bd]::-webkit-scrollbar{display:none}.hide-scrollbar[data-v-40c7d6bd]{-ms-overflow-style:none;scrollbar-width:none}",""]),n.locals={},e.exports=n},489:function(e,t,r){"use strict";r.r(t);var n=r(146);var o=r(156),c=r(116);function d(e){return function(e){if(Array.isArray(e))return Object(n.a)(e)}(e)||Object(o.a)(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var l=r(3),v=(r(45),r(354),r(11),r(39),r(53),{components:{HostQuery:r(373).default},data:function(){return{input:"",messages:[],picture:this.$auth.$state.user.picture,isHostOpen:!1}},props:{targetedUser:{},match_id:{type:Number}},mounted:function(){var e=this;return Object(l.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$axios.$get("".concat("http://localhost:3000","/messages"),{headers:{Authorization:e.$auth.$storage._state["_token.local"],match_id:e.match_id}});case 2:t.sent.forEach((function(t){e.messages=[].concat(d(e.messages),[{value:t.message,isMe:t.from===e.$auth.$state.user.id}])})),e.socket=e.$nuxtSocket({path:"/socket.io",transports:["websocket"],reconnection:!0,auth:{token:e.$auth.$storage._state["_token.local"]},query:{me:e.$auth.$state.user.id}}),e.socket.on("message",(function(data){e.messages=[].concat(d(e.messages),[{value:data,isMe:!1}])}));case 6:case"end":return t.stop()}}),t)})))()},methods:{postMessage:function(){var data={user_id:this.targetedUser.id,message:this.input},e={match_id:this.match_id,from:this.$auth.$state.user.id,message:this.input};this.socket.emit("message",data),this.$axios.$post("".concat("http://localhost:3000","/messages"),e,{headers:{Authorization:this.$auth.$storage._state["_token.local"]}}),this.messages=[].concat(d(this.messages),[{value:this.input,isMe:!0}]),this.input=""},showHost:function(){this.isHostOpen=!this.isHostOpen}},computed:{needs:function(){return"H"===this.targetedUser.needs?"Peut héberger":"T"===this.targetedUser.needs?"Veut voyager":"Veut discuter"}}}),h=(r(386),r(44)),component=Object(h.a)(v,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"w-[80%] relative"},[n("div",{staticClass:"h-[20%] bg-white flex flex-row justify-between"},[n("div",{staticClass:"w-[80%] flex items-center"},[n("div",{staticClass:"ml-[20px] mr-[10px] w-[80px] h-[80px] rounded-[100%] flex justify-center items-center border border-[#213B83]"},[n("div",{staticClass:"w-[70px] h-[70px] rounded-[100%] overflow-hidden"},[n("img",{staticClass:"w-full h-full object-cover",attrs:{src:r(221)("./"+e.targetedUser.picture)}})])]),e._v(" "),n("div",[n("p",[e._v(e._s(e.targetedUser.name)+" "+e._s(e.targetedUser.surname))]),e._v(" "),n("p",[e._v(e._s(e.needs))])])]),e._v(" "),n("div",{staticClass:"w-[20%] flex flex-col items-center justify-center"},[n("button",{staticClass:"bg-[#F6C72B] text-white rounded-[5px] w-[80%] h-[34px] mt-[15px] mb-[7px]"},[e._v("Gérer l'amitié")]),e._v(" "),n("button",{staticClass:"bg-[#213B83] text-white rounded-[5px] w-[80%] h-[34px] mb-[15px] mt-[7px]",on:{click:e.showHost}},[e._v("Demande de voyage")])])]),e._v(" "),n("div",{staticClass:"h-[60%] overflow-auto flex flex-col-reverse hide-scrollbar px-4"},[n("ul",e._l(e.messages,(function(data){return n("li",{key:data.value,staticClass:"py-2.5",class:{reverse:data.isMe}},[n("div",{staticClass:"flex items-center  w-[50%]",class:{reverse:data.isMe}},[n("div",{staticClass:"w-[60px] h-[60px] rounded-[100%] flex justify-center items-center border border-[#213B83]"},[n("div",{staticClass:"w-[50px] h-[50px] rounded-[100%] overflow-hidden"},[data.isMe?n("img",{staticClass:"w-full h-full object-cover",attrs:{src:r(221)("./"+e.picture)}}):n("img",{staticClass:"w-full h-full object-cover",attrs:{src:r(221)("./"+e.targetedUser.picture)}})])]),e._v(" "),n("div",{class:[data.isMe?"mr-[20px]":"ml-[20px]"]},[n("p",[e._v(e._s(data.value))])])])])})),0)]),e._v(" "),n("div",{staticClass:"h-[20%] flex justify-center items-center"},[n("form",{staticClass:"relative w-[90%]",on:{submit:function(t){return t.preventDefault(),e.postMessage.apply(null,arguments)}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.input,expression:"input"}],staticClass:"w-full rounded-full h-[30px] px-8",attrs:{type:"text",placeholder:"Rédiger un message..."},domProps:{value:e.input},on:{input:function(t){t.target.composing||(e.input=t.target.value)}}}),e._v(" "),n("button",{staticClass:"absolute right-3.5 top-1.5"},[n("img",{staticClass:"w-[20px]",attrs:{src:r(384)}})])])]),e._v(" "),n("div",{staticClass:"absolute top-[10%] left-[33%]"},[n("HostQuery",{directives:[{name:"show",rawName:"v-show",value:e.isHostOpen,expression:"isHostOpen"}],attrs:{targetedUser:e.targetedUser},on:{"close-host":e.showHost}})],1)])}),[],!1,null,"40c7d6bd",null);t.default=component.exports}}]);